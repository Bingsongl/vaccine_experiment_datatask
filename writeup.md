# Writeup 

This section will explain the rationale and mechanisms for generating the data and underlying information.

**Abstract:** This project will simulate the results of different COVID-19 interventions while considering the networked nature of social media and network effects of COVID-19 treatments.


## Demographic Information
This project assumes that demographic information of the survey respondents are fully exogenous and representative of a hypothetical population. While this project understands that this is not necessarily representative of real-life populations, the generation mechanism will be predominately based on a uniform distribution for the sake of simplicity.

|Field|Denotation|Generation Mechanism|References|
|--|--|--|--|
|`demographic_age`|Age in years|$X \sim Uniform(21,80)$|
|`demographic_income`|Annual income in thousands of dollars|$X \sim PowerLaw(2), Y = 5 * 10^6X$|https://pages.stern.nyu.edu/~xgabaix/papers/powerLaws.pdf|
|`demographic_education`|Highest educational degree obtained (no schooling, high school, bachelors or associates, postgraduate)|$X \sim Uniform (0,3)$|
|`demographic_unobs_grp`|Simulates membership in an unobserved demographic group. This assumes that different dimensions of social identity can be compressed into low-dimensional approximations|$X \sim Uniform(\{A, B, C, D, E\})$|


## Attitudes Towards Vaccination
These related background questions will be generated by combining an individual's intrinsically held beliefs plus their demographic information, using the following formula and relationships

$$p(j) = \Sigma_i{p(i)w(i,j)} + \beta + \epsilon$$
- Influence from demographics $\Sigma_i{p(i)w(i,j)}$, with:
    - Magnitude of a demographic feature's influence on views $w(i,j) \sim U(-0.25,0.25)$
    - Normalized value of a demographic feature $p(i) \in (0,1)$
- Intrinsically held belief $\beta \sim U(3,7)$
- Random error term $\epsilon \sim N(0,1)$

To make these values seem like survey responses, $p(j)$ will also be cleaned:
- In the rare case that this value exceeds the range (1,10) due to the random error term, the value will be forced back into the range
- Each value will be rounded to the nearest integer


|Field|Description|Possible Responses|Generation Mechanism|Relation to Outcome Variable|Source|
|--|--|--|--|--|
|`att_covid`|How concerned are you about the COVID-19 pandemic?|1 (least concerned) - 10 (most concerned)|||
|`att_vaccine`|In your view, how effective are COVID-19 vaccines?|1 (not effective at all) - 10 (highly effective)|||
|`att_safety`|In your view, how safe are COVID-19 vaccines?|1 (not safe) - 10 (very safe)|||
|`att_unobserved`|Other unobserved factors that influence one's propensity for vaccination|1(dislike vaccines) - 10 (like vaccines)|||

Since these questions all measure qualitatively different opinions, the model will assume that responses to these questions are independent of each other.

## Network Component
To simulate the spread of vaccination behavior in a social network, this component will simulate a facebook social network using a modified Bianconi–Barabási network that has following characteristics. Due to limited computational resources, we assume that this survey full captures a complete and self-contained facebook social network.

**Homophily:** People who are more demographically similar to each other are more likely to become friends with each other.
- This will be implemented via a similarity matrix between each based on the euclidean distance of their demographic characteristics.

**Preferential Attachment:** People are more likely to make friends with people that are more popular.

To generate this Bianconi–Barabási network, . Each time we add a node *j*, the probability of it connecting to another node already in the network *i* is:
$$p(i)=\frac{k(i)sim(i,j)}{\Sigma_i{p(i)}}$$
- The denomenator normalizes it into a probability $p(i) \in [0,1]$.
- $k(i)$ represents the number nodes already connected to *i*
- $sim(i,j) \in [0,1]$ represents the homophily/similarity of the two node's demographic information based on mahalanobis distance. The formula used is:
$$sim(i,j) = \frac{1}{\ln(mahl\_dist(i,j) + 1)+1}$$

**Attitude Diffusion:** Each person begins by holding a set of attitudes about COVID vaccination based on their intrinsically-held views. They then influence (and are influenced by) their friends' attitudes.
- Thus, after each period of time *t*, each node's new vaccination attitude is the mean of itself and its friends' attitudes. This process is repeated infinite times until each node's vaccination attitude converges to a stable value.
- See Appendix A for the vectorized implementation of this algorithm.


## Modelling the Treatment Effect


## Outcome Variable: vaccination
The relationships assumed can be seen in the directed acyclic graph, using the same formulation
$$p(j) = \Sigma_i{p(i)w(i,j)} + \beta + \epsilon$$


## Appendieces

### Appendix A: Vectorized Implementation of Vaccine Attitude Diffusion

This section describes how the algorithm solves for the stable state of the network after the vaccination attitudes fully diffuse through the network.

We want to find: $\lim{t \to \infty}A^t\vec{v}, where A is the adjacency matrix of the network and $\vec{v}$ is the vector representing the vaccination attitude of each person.
- Each row is normalized, so that we find the mean of each